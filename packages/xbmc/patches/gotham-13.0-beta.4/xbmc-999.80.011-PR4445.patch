From b5cf69a48f25cf2811aec849e27a138213936b21 Mon Sep 17 00:00:00 2001
From: ruuk <xbmc@2ndmind.net>
Date: Wed, 19 Mar 2014 12:56:39 -0700
Subject: [PATCH] Add stopSFX() to ModuleXbmc to allow stopping of sounds
 started with playSFX()

---
 xbmc/interfaces/legacy/ModuleXbmc.cpp | 7 +++++++
 xbmc/interfaces/legacy/ModuleXbmc.h   | 8 ++++++++
 2 files changed, 15 insertions(+)

diff --git a/xbmc/interfaces/legacy/ModuleXbmc.cpp b/xbmc/interfaces/legacy/ModuleXbmc.cpp
index 3856421..6507155 100644
--- a/xbmc/interfaces/legacy/ModuleXbmc.cpp
+++ b/xbmc/interfaces/legacy/ModuleXbmc.cpp
@@ -337,6 +337,13 @@
       }
     }
 
+    void stopSFX()
+    {
+      XBMC_TRACE;
+      DelayedCallGuard dg;
+      g_audioManager.Stop();
+    }
+    
     void enableNavSounds(bool yesNo)
     {
       XBMC_TRACE;
diff --git a/xbmc/interfaces/legacy/ModuleXbmc.h b/xbmc/interfaces/legacy/ModuleXbmc.h
index 9e04cfa..f26fa93 100644
--- a/xbmc/interfaces/legacy/ModuleXbmc.h
+++ b/xbmc/interfaces/legacy/ModuleXbmc.h
@@ -230,6 +230,14 @@
     void playSFX(const char* filename);
 
     /**
+     * stopSFX() -- Stops wav file
+     *
+     * example:
+     *   - xbmc.stopSFX()
+     */
+    void stopSFX();
+    
+    /**
      * enableNavSounds(yesNo) -- Enables/Disables nav sounds
      * 
      * yesNo          : integer - enable (True) or disable (False) nav sounds
-- 
1.8.5.5

